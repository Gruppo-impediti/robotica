syms q1 q2 q3 q4 q5 q6 q7 t

a3 = 0.0825;
a4 = -0.0825;
a6 = 0.088;
d1 = 0.333;
d3 = 0.316;
d5 = 0.384;
d7 = 0.107;


A1 = [  cos(q1) 0 sin(q1) 0; ...
        sin(q1) 0 -cos(q1) 0; ...
         0 1 0 d1; ...
         0 0 0 1];
A2 = [  cos(q2) 0 -sin(q2) 0; ...
        sin(q2) 0 cos(q2) 0; ...
        0 -1 0 0; ...
        0 0 0 1];
    
A3 = [  cos(q3) 0 sin(q3) a3*cos(q3); ...
        sin(q3) 0 -cos(q3) a3*sin(q3); ...
        0 1 0 d3; ...
        0 0 0 1];
     
A4 = [  cos(q4) 0 -sin(q4) a4*cos(q4); ...
        sin(q4) 0 cos(q4) a4*sin(q4); ...
        0 -1 0 0; ...
         0 0 0 1];

A5 = [  cos(q5) 0 sin(q5) 0; ...
        sin(q5) 0 -cos(q5) 0; ...
        0 1 0 d5; ...
        0 0 0 1];
    
A6 = [  cos(q6) 0 sin(q6) a6*cos(q6); ...
        sin(q6) 0 -cos(q6) a6*sin(q6); ...
        0 1 0 0; ...
        0 0 0 1];
    
A7 = [  cos(q7) -sin(q7) 0 0; ...
        sin(q7) cos(q7) 0 0; ...
        0 0 1 d7; ...
        0 0 0 1];
    
pos = A1*(A2*(A3*(A4*(A5*(A6*(A7*[0 0 0 1]'))))));

J = jacobian(pos(1:3,1),[q1 q2 q3 q4 q5 q6 q7]);


clear all
clc
syms q1 q2 q3 t a3 a2;
q1(t) = symfun(str2sym('q1(t)'), t);
q2(t) = symfun(str2sym('q2(t)'), t);
q3(t) = symfun(str2sym('q3(t)'), t);
J11 = -sin(q1(t))*(a3*cos(q2(t) + q3(t)) + a2*cos(q2(t)))
dJ11dt = diff(J11,t)

diff(J)